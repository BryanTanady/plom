<!-- Copyright (C) 2023 Andrew Rechnitzer -->
{% extends "Progress/scan_base.html" %}
{% block main_card_content %}
    <div class="row">
        <h5>Reassign discarded image</h5>
        <div class="col">
            <div style="height: 30vw;
                        width: 30vw;
                        justify-content: center;
                        display:flex;
                        align-items:center">
                <img class="shadow-sm"
                     src="{% url 'progress_pushed_img' image_pk %}"
                     style="max-height: 100%;
                            max-width: 100%;
                            transform: rotate({{ angle }}deg)">
            </img>
        </div>
    </div>
    <div class="col p-2 border">
        <form>
            <div x-data={"assigntype":"missing"}>
                <div class="form-radio">
                    <p>
                        <input class="form-check-input"
                               type="radio"
                               id="missing"
                               value="missing"
                               x-model="assigntype">
                        <label class="form-check-label" for="missing">missing fixed page from an incomplete paper</label>
                    </p>
                    <p>
                        <input class="form-check-input"
                               type="radio"
                               id="mobile"
                               value="mobile"
                               x-model="assigntype">
                        <label class="form-check-label" for="mobile">mobile page in an existing paper</label>
                    </p>
                    <p>
                        <input class="form-check-input"
                               type="radio"
                               id="anyfixed"
                               value="anyfixed"
                               x-model="assigntype">
                        <label class="form-check-label" for="anyfixed">arbitrary fixed page</label>
                    </p>
                    <p>
                        <input class="form-check-input"
                               type="radio"
                               id="anymobile"
                               value="anymobile"
                               x-model="assigntype">
                        <label class="form-check-label" for="anymobile">arbitrary mobile page</label>
                    </p>
                </div>
                <div class="container shadow-sm p-2">
                    <div x-show="assigntype=='missing'">
                        Select a missing fixed page from an incomplete paper:
                        <select name="missingPaperPage" class="form-select">
                            <option selected>Missing paper/page</option>
                            {% for pn, pg_list in papers_missing_fixed_pages %}
                                {% for pg in pg_list %}<option value="{{ pn }},{{ pg }}">paper {{ pn }} page {{ pg }}</option>{% endfor %}
                            {% endfor %}
                        </select>
                    </div>
                    <div x-show="assigntype=='mobile'">
                        Select a used paper:
                        <select name="usedPaper" class="form-select">
                            <option>Used paper</option>
                            {% for pn in used_papers %}<option value="{{ pn }}">paper {{ pn }}</option>{% endfor %}
                        </select>
                        Select questions:
                        <div x-data="{allq: false}">
                            <div class="form-check">
                                <input name="questionAll"
                                       value="all"
                                       class="form-check-input"
                                       type="checkbox"
                                       id="questionall"
                                       x-model="allq">
                                <label class="form-check-label" for="questionall">all questions</label>
                            </div>
                            <div x-show="!allq" x-transition>
                                {% for ql in question_labels %}
                                    <div class="form-check">
                                        <input name="questions"
                                               class="form-check-input"
                                               type="checkbox"
                                               value="{{ forloop.counter }}"
                                               id="{{ ql }}">
                                        <label class="form-check-label" for="{{ ql }}">Index: {{ ql }}</label>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div x-show="assigntype=='anyfixed'">any fixed page</div>
                    <div x-show="assigntype=='anymobile'">any mobile page</div>
                </div>
            </form>
        </div>
    </div>
{% endblock main_card_content %}
